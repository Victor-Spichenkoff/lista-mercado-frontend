(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(9430)}])},9430:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var s=a(5893),n=a(7294),r=a(131),l=a.n(r);let o=(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})}),d=(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})});var c=a(7091),i=a.n(c);function u(e){return(0,s.jsxs)("table",{className:i().table,children:[(0,s.jsxs)("thead",{className:i().head,children:[(0,s.jsx)("td",{className:i().first,children:"Resumo"}),(0,s.jsx)("td",{children:"Unidades Compradas"}),(0,s.jsx)("td",{children:"Pre\xe7o Final"}),(0,s.jsx)("td",{className:i().last,children:"Saldo"})]}),(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{className:i().tr,children:[(0,s.jsx)("td",{children:"Dados da Compra"}),(0,s.jsx)("td",{children:e.finalUnits}),(0,s.jsxs)("td",{children:["R$ ",e.finalPrice.toFixed(2).replace(".",",")]}),(0,s.jsx)("td",{children:e.balance})]})})]})}var m=a(6154);let h="https://lista-mercado-api.onrender.com";function x(e){let[t,a]=(0,n.useState)(0),[r,c]=(0,n.useState)(0);async function i(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],s=0;return e.products.forEach((e,t)=>{e.added&&(s+=e.price*e.units)}),t&&a(s),s}let[x,_]=(0,n.useState)(0);function p(){let a;i(),_(e.maxSpend-t),a=0,e.products.map(e=>{e.added&&(a+=e.units)}),c(a)}return(0,n.useEffect)(()=>{p()}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("table",{className:l().table,onClick:p,children:[(0,s.jsxs)("thead",{className:l().head,children:[(0,s.jsx)("td",{className:l().first,children:"Carrinho"}),(0,s.jsx)("td",{children:"Nome"}),(0,s.jsx)("td",{children:"Unidades"}),(0,s.jsx)("td",{children:"Pre\xe7o Final"}),(0,s.jsx)("td",{className:l().last,children:"A\xe7\xf5es"})]}),(0,s.jsx)("tbody",{children:((0,n.useEffect)(()=>{i()}),e.products.map((t,a)=>{let n=(t.price*t.units).toFixed(2).replace(".",","),r=t.added;return(0,s.jsxs)("tr",{className:l().tr,children:[(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"checkbox",checked:r,onClick:()=>void(r?t.added=!1:t.added=!0,r=!r,m.Z.put("".concat(h,"/products/updateOne"),t)),className:l().chekbox})}),(0,s.jsx)("td",{children:t.name}),(0,s.jsx)("td",{children:t.units}),(0,s.jsx)("td",{children:n}),(0,s.jsx)("td",{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:l().edit,onClick:()=>{e.setSelectedProduct(t),e.setShowForm(!0)},children:o}),(0,s.jsx)("button",{className:l().delete,onClick:a=>{m.Z.delete("".concat(h,"/products/delete/").concat(t.id)),console.log(t),e.reload(Math.random()*Math.random()),setTimeout(()=>e.reload(Math.random()*Math.random()),1e3)},children:d})]})})]})}))})]}),(0,s.jsx)(u,{finalPrice:t,finalUnits:r,balance:x})]})}var _=a(7528),p=a.n(_),j=a(2759),g=a.n(j);let b=0;function v(e){var t,a,r;let l=null!==(t=e.product.id_purchase)&&void 0!==t?t:2,o=e.product.id=null!==(a=e.product.id)&&void 0!==a?a:void 0,[d,c]=(0,n.useState)(null!==(r=e.product)&&void 0!==r?r:{});function i(){var t,a,s;c({name:null!==(t=d.name)&&void 0!==t?t:"N\xe3o Informado",price:null!==(a=d.price)&&void 0!==a?a:1,units:null!==(s=d.units)&&void 0!==s?s:1,id_purchase:l,id:o});let n={name:d.name,price:Number(d.price),units:parseInt(d.units),id:Number(d.id),id_purchase:Number(d.id_purchase)};o?(console.log(d),m.Z.put("".concat(h,"/products/updateOne"),n).then(()=>console.log("Atualizado"))):m.Z.post("".concat(h,"/products"),n),setTimeout(()=>{e.reload(Math.random()*Math.random()),e.setShowForm(!1)},400),setTimeout(()=>{e.reload(Math.random()*Math.random()),console.log("Carregado pela: "+ ++b)},2e3),setTimeout(()=>{e.reload(Math.random()*Math.random())},4e3)}return window.onkeydown=e=>{let t=e.key;"Enter"==t&&i()},(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:g().h1,children:o?"Editar":"Adicionar"}),(0,s.jsxs)("form",{action:"",children:[(0,s.jsxs)("div",{className:g().group,children:[(0,s.jsx)("label",{htmlFor:"",children:"Nome"})," ",(0,s.jsx)("br",{}),(0,s.jsx)("input",{type:"text",value:d.name,onChange:e=>c({name:e.target.value,price:d.price,units:d.units,id_purchase:l,id:o})})]}),(0,s.jsxs)("div",{className:g().group,children:[(0,s.jsx)("label",{htmlFor:"",children:"Pre\xe7o"})," ",(0,s.jsx)("br",{}),(0,s.jsx)("input",{type:"number",value:d.price,onChange:e=>c({name:d.name,price:d.price,price:e.target.value,units:d.units,id_purchase:l,id:o})})]}),(0,s.jsxs)("div",{className:g().group,children:[(0,s.jsx)("label",{htmlFor:"",children:"Unidades"})," ",(0,s.jsx)("br",{}),(0,s.jsx)("input",{type:"number",value:d.units,onChange:e=>c({name:d.name,price:d.price,units:e.target.value,id_purchase:l,id:o})})]})]}),(0,s.jsxs)("div",{className:g().buttons,children:[(0,s.jsx)("button",{className:g().cancel,onClick:()=>e.setShowForm(!1),children:"Cancelar"}),(0,s.jsx)("button",{className:g().save,onClick:i,children:"Salvar"})]})]})}function f(){let e,t;let[a,r]=(0,n.useState)([]),[l,o]=(0,n.useState)({name:"",price:0,units:0}),[d,c]=(0,n.useState)(!1),[i,u]=(0,n.useState)(null!=e?e:2),[_,j]=(0,n.useState)("");(0,n.useEffect)(()=>{u(Number(localStorage.getItem("idPurchaseStoraged"))),j(Number(localStorage.getItem("maxSpendStoraged"))),console.log(e,t)},[]);let[g,b]=(0,n.useState)(0);try{(0,n.useEffect)(()=>{m.Z.get("".concat(h,"/products/").concat(i)).then(e=>r(e.data)).then(console.log("Carregado"))},[g,i,d]),(0,n.useEffect)(()=>{setTimeout(async()=>{console.log(i),await m.Z.get("".concat(h,"/products/").concat(i)).then(e=>r(e.data)).then(console.log("Carregado"))},4e3)},[])}finally{let[e,t]=(0,n.useState)(0);return(0,s.jsx)("div",{className:"list-area",children:d?(0,s.jsx)(v,{product:l,setShowForm:c,reload:b}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:p().h1,children:"Lista"}),(0,s.jsxs)("div",{className:"list-actions",children:[(0,s.jsxs)("div",{className:p().rs,children:["R$",(0,s.jsx)("input",{placeholder:"Valor M\xe1ximo",type:"number",className:p().maxValue,id:"maxSpend",value:_,onChange:e=>{j(e.target.value),localStorage.setItem("maxSpendStoraged",Number(e.target.value))}})]}),(0,s.jsx)("input",{type:"number",value:i,className:p().idPurchase,onChange:e=>{u(e.target.value),localStorage.setItem("idPurchaseStoraged",Number(e.target.value))}}),(0,s.jsx)("button",{className:p().newItem,onClick:()=>{o({id:void 0,id_purchase:Number(i)}),c(!0)},children:"Novo Item"})]}),(0,s.jsx)(x,{products:a,balance:e,maxSpend:_,onChange:0,reload:b,setShowForm:c,setSelectedProduct:o,product:l})]})})}}var N=a(7554),S=a.n(N);function w(e){return(0,s.jsx)("div",{className:S().div,children:(0,s.jsx)("h1",{className:S().titulo,children:e.titulo})})}function k(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w,{titulo:"Fa\xe7a sua lista de compras"}),(0,s.jsx)(f,{})]})}},2759:function(e){e.exports={group:"Form_group___IfsZ",buttons:"Form_buttons__CTdeU",cancel:"Form_cancel__pHFec",save:"Form_save__RaGJ_",h1:"Form_h1__6mAw_"}},7554:function(e){e.exports={titulo:"Header_titulo__IdkDX",div:"Header_div__wZhxk"}},7528:function(e){e.exports={h1:"List_h1__LIPd4",rs:"List_rs__KacSs",finalValue:"List_finalValue__vH4gy",maxValue:"List_maxValue__Ome2h",newItem:"List_newItem__4X62B",idPurchase:"List_idPurchase__CKUDG"}},7091:function(e){e.exports={table:"Resume_table__LwPS7",head:"Resume_head__8m7b3",tr:"Resume_tr__Psy_R",last:"Resume_last__tlCDF",first:"Resume_first__IuuZx"}},131:function(e){e.exports={table:"Table_table__rP0J4",head:"Table_head__idLgW",tr:"Table_tr__MLA3p",last:"Table_last__J0RNl",first:"Table_first__qQtuR",chekbox:"Table_chekbox__4SJOT",edit:"Table_edit__aKQIM",delete:"Table_delete__E51K7"}}},function(e){e.O(0,[154,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);